<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui" xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Checkers.View.GamePage" 
             xmlns:converters="clr-namespace:Checkers.Converters" 
             Title="GamePage">


    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:SquareToColorConverter x:Key="SquareToColorConverter"/>
        </ResourceDictionary>
    </ContentPage.Resources>

    <CollectionView ItemsSource="{Binding Squares}">
        <CollectionView.ItemsLayout>
            <GridItemsLayout Orientation="Vertical" Span="8"
                             HorizontalItemSpacing="0"
                             VerticalItemSpacing="0"/>
        </CollectionView.ItemsLayout>
        <CollectionView.ItemTemplate>
            <DataTemplate>
                <ImageButton BackgroundColor="{Binding IsDark, Converter={StaticResource SquareToColorConverter}}"
                             Source="{Binding PieceImage}" 
                             Command="{Binding SquareClickedCommand}"
                             Aspect="AspectFit" WidthRequest="40" HeightRequest="40"/>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>
</ContentPage>