<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Checkers.View.GamePage"
             xmlns:converters="clr-namespace:Checkers.Converters"
             Title="GamePage">

    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:SquareToColorConverter x:Key="SquareToColorConverter"/>
            <converters:PieceToColorConverter x:Key="PieceToColorConverter"/>
        </ResourceDictionary>
    </ContentPage.Resources>

    <CollectionView x:Name="BoardCollection"
                    ItemsSource="{Binding Squares}"
                    SelectedItem="{Binding SelectedSquare, Mode=TwoWay}">
        <CollectionView.ItemsLayout>
            <GridItemsLayout Orientation="Vertical" Span="8" />
        </CollectionView.ItemsLayout>

        <CollectionView.ItemTemplate>
            <DataTemplate>
                <Frame CornerRadius="0"
                       BorderColor="Black"
                       Margin="1"
                       Padding="0"
                       BackgroundColor="{Binding IsDark, Converter={StaticResource SquareToColorConverter}}">
                    <Ellipse WidthRequest="40"
                             HeightRequest="40"
                             Fill="{Binding Piece, Converter={StaticResource PieceToColorConverter}}"
                             IsVisible="{Binding Piece}" />
                </Frame>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>

</ContentPage>